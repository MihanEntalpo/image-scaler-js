Исходная задача:

Напиши одностраничник html+css+js в виде единого файла index.html

Суть:
1) В верхней панели человек выбирает размер листа: A5, A4, A3, или произвольный размер в миллиметрах, а также галочку "повернуть лист на 90 градусов"
2) Рядом с выбором размера есть кнопка загрузки изображения, при нажатии предлагается выбрать файл с устройства
3) После загрузки изображения под панелью отображается окно имеющее рамки соответствующие выбранному масштабу, либо вертикальному, либо горизонтальному в зависимости от нажатия кнопки "повернуть лист на 90 градусов"
4) Внутри рамки вписано изображение, у него по углам есть "ручки" позволяющие его растягивать и сжимать - но только пропорционально, также за само изображение можно взять и перетаскивать, при выходе изображения за рамки, сами рамки остаются видными поверх изображения.
4.1) Если получится сделать чтобы за пределами рамок изображение становилось серым благодаря некоему оверлею - это будет даже лучше.
4.2) Также будет здорово, если изображение можно растягивать, сжимать, перемещать с помощью мульти-тач событий на телефоне, чтобы сайт работал и на ПК и на телефоне.
5) Поверх изображения отображается "линейка" - это небольшой цветной прямоугольник с делениями, который по умолчанию находится в середине листа, и его можно передвигать туда-сюда мышкой.
5.1) также, на нём в одном углу есть маленькая кнопка с круговыми стрелками которая при нажатии поворачивает его на 90 градусов туда-сюда.
5.2) на другом конце "ручка" за которую эту линейку можно удлинять/укорачивать путём растягивания её мышкой.
5.3) Также, желательно чтобы тач-события работали.
6) Линейка имеет на себе риски в сантиметрах и миллиметрах пропорциональные масштабу рамки и её размерам заданным изначально, чтобы, например, если выбран масштаб А4, и линейка растянута на всю ширину - то на ней 210 миллиметров (или 297 если лист повёрнут).
6.1) Эта линейка нужна чтобы прикладывая её к объектам на фото понимать, как надо изменить размер фотографии чтобы они при распечатке получили ровно такой размер в миллиметрах.
6.2) Если рядом с рисками сантиметров можно будет отобразить цифры 0,1,2,3 и так далее - это будет просто прекрасно.
7) На верхней панели должна быть кнопка "экспорт" которая позволяет скачать изображение обрезанное по границам рамки листа, если изображение выходит за границы - оно должно обрезаться, если оно сдвинуто так, что занимает лишь часть листа - пустое место должно быть закрашено белым.
7.1) При экспорте разрешение готового изображения нужно сделать максимально возможным без upscal-инга, а именно: допустим, изначальное разрешение 1200х1600, мы её увеличили чтобы подогнать к размеру 210х297мм, так что по высоте оно полностью соответствует листу, а по ширине - обрезается до размера 1131 (пропорционально формату А4). Тогда и экспорт будет в формате 1131х1600. Или фотография была увеличена так, что её правый нижний угол размером 212х297 растянут на весь кадр А4, а остальное вышло за пределы - тогда и экспортируем в формате 212х297.

Все новые задачи добавляйте в этот файл отдельными абзацами.

Новая задача:
- Создать `workflow.md`, куда нужно записывать историю рассуждений, проблемы и выводы: что помогло, что нет, и как лучше действовать в будущем. Перед началом работы документ следует перечитывать и дополнять новыми наблюдениями.
- В `AGENTS.md` добавить инструкцию про обязательное чтение `workflow.md` и запрет на создание скриншотов.

Новая задача:
- Поменять местами кнопку поворота линейки и ручку изменения её длины, чтобы ручка оказывалась на стороне, которая действительно тянется.
- Сделать кнопку поворота круглой со светло-серым фоном вместо синего овала.
- Добавить режим масштабирования изображения при зажатой клавише SHIFT: в этом режиме перетягивание снимка должно равномерно масштабировать его относительно центра листа, даже если углы за пределами кадра.

Новая задача:
- Выравнять размеры кнопки поворота линейки, чтобы вычисленные ширина и высота были одинаковыми.
- Переделать работу ручки изменения длины линейки: в горизонтальном положении ручка должна находиться справа и растягивать линейку вправо, а в вертикальном — внизу и тянуть линейку вниз; числа в вертикальном положении должны располагаться сверху вниз (1,2,3...).
- Обновить текст подсказки в шапке на новое описание взаимодействий и добавить кнопку "Картинку в центр", возвращающую фото в центр и вписывающую его в лист.
- При экспорте именовать файл по имени исходного изображения (если доступно) с добавлением формата листа (например, A4 или пользовательские размеры в мм).

Новая задача:
- Перенести кнопку поворота линейки к левому краю для горизонтальной ориентации и к верхнему краю для вертикальной ориентации, чтобы она не конфликтовала с ручкой растяжения.

Новая задача:
- Заполнить README.md описанием проекта и его назначения.
- В панели управления добавить поле "Поля принтера, мм" с двумя числовыми значениями (по ширине и по высоте) и учитывать эти поля при вычислении рабочей области листа.
- Сохранять выбранный формат листа и заданные поля принтера в localStorage, чтобы они восстанавливались при повторном открытии сайта.

Новая задача:
- Сделать так, чтобы экспорт сохранял исходный формат файла: JPEG должен сохраняться как JPEG с качеством 100%, PNG — как PNG и т.д.
